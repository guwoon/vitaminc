<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>실시간 다국어 자막</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #original { font-size: 1.5em; margin-bottom: 20px; }
        .translation { font-size: 1.2em; margin-top: 10px; }
        button { padding: 10px 20px; font-size: 1em; }
        #translations { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>실시간 다국어 자막</h1>
    <button onclick="startRecognition()">음성 인식 시작</button>
    <div id="original">원본 텍스트: </div>
    <div id="translations"></div>

    <script>
        let recognition;
        function startRecognition() {
            if (!('webkitSpeechRecognition' in window)) {
                alert('이 브라우저는 음성 인식을 지원하지 않습니다.');
                return;
            }

            recognition = new webkitSpeechRecognition();
            recognition.lang = 'ko-KR'; // 인식 언어: 한국어
            recognition.continuous = true;
            recognition.interimResults = false;

            recognition.onresult = function(event) {
                let transcript = event.results[event.results.length - 1][0].transcript.trim();
                document.getElementById('original').innerText = '원본 텍스트: ' + transcript;
                translateText(transcript);
            };

            recognition.onerror = function(event) {
                console.error('음성 인식 오류:', event.error);
            };

            recognition.start();
        }

        async function translateText(text) {
            const languages = {
                'fr': '프랑스어',
                'zh-CN': '중국어(간체)',
                'id': '인도네시아어',
                'mn': '몽골어'
            };

            const translationsDiv = document.getElementById('translations');
            translationsDiv.innerHTML = '';

            for (let [langCode, langName] of Object.entries(languages)) {
                try {
                    let response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=ko|${langCode}`);
                    let data = await response.json();
                    let translatedText = data.responseData.translatedText;

                    let div = document.createElement('div');
                    div.className = 'translation';
                    div.innerText = `${langName}: ${translatedText}`;
                    translationsDiv.appendChild(div);
                } catch (error) {
                    console.error('번역 오류:', error);
                }
            }
        }
    </script>
</body>
</html>
